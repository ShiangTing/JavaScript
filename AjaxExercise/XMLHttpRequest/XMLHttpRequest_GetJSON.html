<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

    </style>
</head>
<body>
    <h1>用XMLHttpRequest請求GitHub JSON資料</h1>
    <button id='button1'>Request JSON1</button>
    <button id='button2'>Request JSON2</button>
    <button id='button3'>Request JSON3</button>
    <button id='button4'>Request JSON4</button>
    <button id='btnClear'>Clear</button>
    <div id='msg'></div>
 
    <!-- ///使用模組 只有寫成檔案才能快取/// -->
    <script type="module">
        import {$g} from "../Modules/helpers.js"

        //console.log($g("#button1").innerText);
        //function後沒有()是因為是委派，是直接執行此function
        let btn1 = $g("#button1").addEventListener('click',requestJSON); 
        let msg = $g("#msg");
       //  let btn2 = $g("#button2").addEventListener('click',requestJSON2);
        // let btn3 = $g("#button3").addEventListener('click',requestJSON3);
        // let btn4 = $g("#button1").addEvenListener('click',RequestJSON);
        let xhr = new XMLHttpRequest();
        const url="https://raw.githubusercontent.com/ShiangTing/FileStorage/master/IPad.json";
        // function requestJSON(){
        //     xhr.onload = function(){
        //         msg.innerText = this.responseText;
        //         console.log(this.responseText);
                                                                                                                                             
        //         let ipadObject = JSON.parse(this.responseText)
        //         console.log(ipadObject)
        //     }
        //     xhr.open('GET',url);
        //     xhr.send();

        // }

        // function requestJSON2(){
        //     xhr.onload = function(){
        //         let response = this.response;
        //         let responseText = this.responseText;
        //         let responseType = this.responseType;
        //         let responseUrl = this.responseURL;
        //         let status = this.status;
        //         let statusText = this.statusText;
        //         let readyState = this.readyState;

        //         msg.innerText = this.response;
        //         console.log(this);



            
        //     } 
        //     xhr.open('GET',url);
        //     xhr.send();


        // }

    function requestJSON(){
     //   let xhr = new XMLHttpRequest();
        xhr.onload = function(){
            if(xhr.readyState==4 && xhr.status==200){
                msg.textContent = this.responseText;
            }
            else{
                msg.textContent = '發生錯誤,HTTP response代碼' + xhr.status;
            }
            if(xhr.readyState==4 && xhr.statusText=="OK"){
                msg.textContent = this.responseText;
            }
            else{
                msg.textContent = '發生錯誤,HTTP response代碼' + xhr.status;
            }
           
        }
        xhr.open('GET',url);
            xhr.send();
    }

    </script>
</body>
</html>