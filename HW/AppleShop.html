<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <title>Apple</title>
    <style>
        *{
            font-family: Arial, Helvetica, sans-serif,'Microsoft JhengHei';
        }
        .box {
            margin: 10px 0;
            border: 1px solid #d6d6d6;
            padding: 30px 0px;
            border-radius: 4px;
        }
        .wifitext {
         font-weight: 600;
         font-size: 20px;
        }
        .storagetext{
        font-weight: 600;
         font-size: 29px; 
        }
        .color {
            height: 50%;
        }

        .color img {
            height: 30%;
            width: 30%;
        }

        .price ,.wifiprice {
            font-size: 13px;
            color: #333333;
        }

        .totalprice {
     
        font-size: 40px;
        font-weight: bold;

        }

        .content{
            justify-content: center;
            display: flex;
          align-items: center;
            background-color: #FAFAFA;
            margin: 20px 0;
            height: 20%;
            width: 100%;
        }

        .pad-top-1 {
            padding-top: 20px;
        }

        .pad-top-2 {
            padding-top: 100px;
        }

        .store,
        .wifi {
            height: 20%;
        }

        .mg-1 {
            margin: 20px 0;
        }
        .context{
   
         overflow: scroll;
        
        }

        .context::-webkit-scrollbar{
            width: 0px;
            background: transparent; /* Chrome/Safari/Webkit */
        }
        .context {
         scrollbar-width: none; /* Firefox */
         -ms-overflow-style: none;  /* IE 10+ */
        }

        
 
    </style>
</head>

<body>
    <div class="btn-gp">
        <div class="container">
            <div class="row text-center justify-content-center">
                <button class="btn btn-dark " id="button_ipad"> IPad </button>
                <button class="btn btn-dark" id="button_iphone"> IPhone</button>
            </div>
        </div>
    </div>
    <div class="product">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="picture pad-top-2">
                        <img id="picture" src="" alt="">
                    </div>


                </div>





                <div class="col-lg-6 context ">
               
                    <div class="title" id="title">
                        <h2></h2>
                    
                    </div>
                    <div class="specpad-top-1">
                        <div class="colorbox pad-top-1" id="colorbox">
                            <!-- <h5>外觀</h5>

                             <div class="row ipad-row" id="row"> -->

                            <!-- <div class="col-lg-6">
                                        <div class="box text-center d-flex flex-column align-items-center" id="colorgrey">
                                            <div class="color" id="reddot"></div>
                                            <div class="text"></div>
                                        </div>
                                    </div>-->

                            <!-- </div> -->

                        </div>
                        <div class="store pad-top-1" id="store">
                            <!-- <h5>儲存裝置</h5>
                            <div class="row" id="rowStorage"> -->

                            <!-- <div class="col-lg-6">
                                    <div class="box text-center d-flex flex-column align-items-center" id="minstore">
                                        <div class="text"></div>
                                        <div class="price"></div>
                                    </div>
                                </div>
                            </div> -->


                        </div>
                        <div class="wifi pad-top-1" id="wifi">
                            <!-- <h5>WI-FI加行動網路</h5>
                            <div class="row" id="rowwifi"> -->

                            <!-- <div class="col-lg-6">
                                    <div class="box text-center d-flex flex-column align-items-center" id="wifi">
   
                                        <div class="text">WI-FI</div>
                                    </div>
                                </div> -->

                            <!-- </div> -->

                        </div>

                    </div>
                    <div class="content" id="content">
                        <!-- <div class="totalprice text-center mg-1">

                    </div> -->
                    </div>
                    </div>
             

             
           

            </div>




        </div>




    </div>

    <script>
        var Product = {
            Ipad: {

                ProductDetails: [{
                        Name: "IPad"
                    },

                ],

                HtmlData: {
                    ColorDot: [{
                            tagName: "太空灰",
                            img: "../assets/finish-spacegray.png",
                            idName: "spacegray"
                        },
                        {
                            tagName: "銀色",
                            img: "../assets/finish-silver.png",
                            idName: "silver"
                        },
                        {
                            tagName: "金色",
                            img: "../assets/finish-gold.png",
                            idName: "gold"
                        },
                    ],
                    HasWifi: [{
                            wifiType: "Wi-Fi",
                            wifiplus: false,
                            priceCount: 0
                        },
                        {
                            wifiType: "Wi-Fi + 行動網路",
                            wifiplus: true,
                            priceCount: 4500
                        }
                    ]
                },
                //把 wifityye搬下 然後把storage+internet合起來
                Spec: {
                    Storage: [{
                            size: "32GB",
                            price: 10900
                        },
                        {
                            size: "128GB",
                            price: 13900
                        }
                    ],
                    Internet: [{
                            wifiplus: false,
                            priceCount: 0,
                            wifiType: "Wi-Fi"
                        },
                        {
                            wifiplus: true,
                            priceCount: 4500,
                            wifiType: "Wi-Fi + 行動網路"
                        }

                    ]


                },
                OutWard: [{
                        color: "spacegray",
                        picture: "../assets/ipad-wifi-select-spacegray.png",
                        wifiplusPictire: "../assets/ipad-cell-select-spacegray.png"
                    },
                    {
                        color: "gold",
                        picture: "../assets/ipad-wifi-select-gold.png",
                        wifiplusPictire: "../assets/ipad-cell-select-gold.png"
                    },
                    {
                        color: "silver",
                        picture: "../assets/ipad-wifi-select-silver.png",
                        wifiplusPictire: "../assets/ipad-cell-select-silver.png"
                    }

                ],

            },

            Iphone: {

                ProductDetails: [{
                        Name: "IPhoneSE"
                    },

                ],
                //{ProductName:"Ipad"},
                HtmlData: {
                    ColorDot: [{
                            tagName: "白色",
                            img: "../assets/finish-white-201909.jpg",
                            idName: "white"
                        },
                        {
                            tagName: "黑色",
                            img: "../assets/finish-black-201909.jpg",
                            idName: "black"
                        },

                        {
                            tagName: "紅色",
                            img: "../assets/finish-red-201909.jpg",
                            idName: "red"
                        },

                    ]
                },
                Spec: {
                    Storage: [{
                            size: "64GB",
                            price: 24900
                        },
                        {
                            size: "128GB",
                            price: 26900
                        },
                        {
                            size: "256GB",
                            price: 30400
                        }
                    ],



                },
                OutWard: [{
                        color: "white",
                        picture: "url"
                    },
                    {
                        color: "dark",
                        picture: "url"
                    },

                    {
                        color: "red",
                        picture: "url"
                    }

                ],

            }



        }



        let currentPrice = Product.Ipad.Spec.Storage[0].price;
        let picture = document.querySelector('#picture');
        let title = document.querySelector('.title h2');


        const hasWifiPriceCount = 4500;


        const content = document.querySelector('.content');
        const wifiIdSet = document.querySelector('#wifi');
        const storeIdSet = document.querySelector('#store');
        const colorboxIdSet = document.querySelector('#colorbox');

        ///生成HTML/// 
        let ipadBtn = document.querySelector('#button_ipad')
        let iphoneBtn = document.querySelector('#button_iphone')


        ///切換Iphone///
        iphoneBtn.addEventListener('click', (event) => {
            //清除innerHTML//
            colorboxIdSet.innerHTML = '';
            storeIdSet.innerHTML = '';
            wifiIdSet.innerHTML = '';
            content.innerHTML = '';

            setHtml();
            title.innerText = "購買IPhone"
            picture.src="../assets/iphone-se-black.png";
       
            var row = document.querySelector('#row');

            var rowStorage = document.querySelector('#rowStorage');
            createColorHtml(row, Product.Iphone.HtmlData.ColorDot);
            createStorageHtml(rowStorage, Product.Ipad.Spec.Storage);

            ///圖片顏色選取互動///
            document.querySelectorAll('.color-select').forEach((item) => {
                item.addEventListener('click', (event) => {
                    const obj = event.currentTarget;
                    const color2 = obj.getAttribute('name');
                    picture.setAttribute('src', `../assets/iphone-se-${color2}.png`)
                    console.log("ahah")
                })
            });



            document.querySelectorAll('.storage-select').forEach((item) => {
                item.addEventListener('click', (event) => {
                    // const storage = event.currentTarget.querySelector('.price').innerText;
                    const storage = event.currentTarget.getAttribute('name');
                    currentPrice = parseInt(storage);
                    const changePrice = document.querySelectorAll('.wifiprice');
                    for (let item of changePrice) {
                        item.innerHTML = `NT${currentPrice }起`;
                    }
                    price.innerText = `NT$${currentPrice}起`;

                })

            })
            let price = document.querySelector(".totalprice");
            price.innerText = `NT$${currentPrice}起`;


        })

        ///切換Ipad///
        ipadBtn.addEventListener('click', (event) => {

            colorboxIdSet.innerHTML = '';
            storeIdSet.innerHTML = '';
            wifiIdSet.innerHTML = '';
            content.innerHTML = '';
            picture.src="../assets/ipad-wifi-select-spacegray.png";
            setHtml();
    
            title.innerText = "購買IPad"
            let wifi = document.querySelector('.wifi');
            let h1 = document.createElement('h4');
            h1.innerText = "WI-FI加行動網路";
            wifi.append(h1);
            let div3 = document.createElement('div');
            div3.setAttribute('class', 'row');
            div3.setAttribute('id', 'rowwifi')
            wifi.append(div3);

            var row = document.querySelector('#row');
            var rowStorage = document.querySelector('#rowStorage');
            var rowWifi = document.querySelector('#rowwifi');
            var wifitext = document.querySelectorAll('.wifitext');


            createWifiSection(rowWifi, Product.Ipad.HtmlData.HasWifi);
            createColorHtml(row, Product.Ipad.HtmlData.ColorDot);
            createStorageHtml(rowStorage, Product.Ipad.Spec.Storage);

            ///圖片顏色選取互動///
            document.querySelectorAll('.color-select').forEach((item) => {
                item.addEventListener('click', (event) => {
                    const obj = event.currentTarget;
                    //const color = obj.attributes.name.value
                    const color2 = obj.getAttribute('name');

                    picture.setAttribute('src', `../assets/ipad-wifi-select-${color2}.png`)

                    console.log("ahah")
                })
            });

            document.querySelectorAll('.wifi-select').forEach((item) => {
                item.addEventListener('click', (event) => {
                    const wifiColor = event.currentTarget.getAttribute('name');
                    const color = picture.getAttribute('src');

                    const colorSplit = color.split('-');
                    if (wifiColor == "true") {
                        picture.setAttribute('src',
                            `../assets/ipad-cell-select-${colorSplit[3]}`);
                    } else {}

                    const changewifiPrice = event.currentTarget.querySelector(
                        '.wifi-select .wifiprice').innerText;

                    currentPrice = parseInt(changewifiPrice.split('$')[1].split('起')[0]);

                    console.log(currentPrice);
                    price.innerText = `NT$${currentPrice}起`;

                })


            })

            document.querySelectorAll('.wifi-select').forEach((item) => {
                item.addEventListener('click', (event) => {
                    const wifiColor = event.currentTarget.getAttribute('name');
                    const color = picture.getAttribute('src');

                    const colorSplit = color.split('-');
                    if (wifiColor == "true") {
                        picture.setAttribute('src',
                            `../assets/ipad-cell-select-${colorSplit[3]}`);

                        
                    } else {}

                    const changewifiPrice = event.currentTarget.querySelector(
                        '.wifi-select .wifiprice').innerText;

                    currentPrice = parseInt(changewifiPrice.split('$')[1].split('起')[0]);

                    console.log(currentPrice);
                    price.innerText = `NT$${currentPrice}起`;

                })


            })


            document.querySelectorAll('.storage-select').forEach((item) => {
                item.addEventListener('click', (event) => {
                    const storage = event.currentTarget.getAttribute('name');
                    currentPrice = parseInt(storage);
                    const changePrice = document.querySelectorAll('.wifiprice');
                    //    for(let item of changePrice ){
                    //       item.innerHTML=`NT${currentPrice + hasWifiPriceCount}起`;
                    //    }
                    changePrice[0].innerHTML = `NT$${currentPrice}起`;
                    changePrice[1].innerHTML = `NT$${currentPrice+hasWifiPriceCount}起`;
                    price.innerText = `NT$${currentPrice}起`;

                })

            })
            let price = document.querySelector(".totalprice");
            price.innerText = `NT$${currentPrice}起`;



        })


        function createColorHtml(rootEl, dataSet) {
            console.log(rootEl);
            dataSet.forEach(element => {
                rootEl.insertAdjacentHTML("beforeend",
                    `<div class= "col-lg-6"><div class="box text-center d-flex flex-column align-items-center color-select" name="${element.idName}"> <div class="color"><img src="${element.img}"></div> <div class="text">${element.tagName}</div></div></div>`
                )
            });
        }


        function createStorageHtml(rootEl, dataSet) {
            dataSet.forEach(element => {
                rootEl.insertAdjacentHTML("beforeend",
                    `<div class="col-lg-6"><div class="box text-center d-flex flex-column align-items-center storage-select" name="${element.price}" ><div class="text storagetext">${element.size}</div><div class="price">NT$${element.price}起</div></div></div>`
                )

            });
        }

        function createWifiSection(rootEl, dataSet) {
            dataSet.forEach(element => {
                rootEl.insertAdjacentHTML("beforeend",
                    `<div class="col-lg-6">
                <div class="box text-center d-flex flex-column align-items-center wifi-select" name="${element.wifiplus}"> 
                    <div class="text wifitext">${element.wifiType}</div>
                    <div class="wifiprice" name="${currentPrice + hasWifiPriceCount}">NT$${currentPrice + hasWifiPriceCount}起</div>
                </div> 
            </div>`
                )

            });
        }





        ///選取容量之價錢變化///
        document.querySelectorAll('.storage-select').forEach((item) => {
            item.addEventListener('click', (event) => {
                const storage = event.currentTarget.getAttribute('name');
                currentPrice = parseInt(storage);
                const changePrice = document.querySelectorAll('.wifiprice');
                //    for(let item of changePrice ){
                //       item.innerHTML=`NT${currentPrice + hasWifiPriceCount}起`;
                //    }
                changePrice[0].innerHTML = `NT$${currentPrice}起`;
                changePrice[1].innerHTML = `NT$${currentPrice+hasWifiPriceCount}起`;
                price.innerText = `NT$${currentPrice}起`;

            })

        })


        ///圖片顏色選取互動///

        //圖片wifi選取互動//
   


        //創造Html骨幹//
        function setHtml() {
            let colorbox = document.querySelector('.colorbox');
            let h5 = document.createElement('h4');
            h5.innerText = "外觀";
            colorbox.append(h5);
            let div = document.createElement('div');
            div.setAttribute('class', 'row');
            div.setAttribute('id', 'row')
            colorbox.append(div);

            let store = document.querySelector('.store');
            let h = document.createElement('h4');
            h.innerText = "儲存裝置";
            store.append(h);
            let div2 = document.createElement('div');
            div2.setAttribute('class', 'row');
            div2.setAttribute('id', 'rowStorage')
            store.append(div2);

            let div4 = document.createElement('div');
            div4.setAttribute('class', 'totalprice text-center mg-1');
            content.append(div4);
        }


        function scroll(){
            let parent  = document.querySelector('.context');
            let child  = document.querySelector('.scroll');
            child.style.paddingRight = child.offsetWidth - child.clientWidth + "px";

        }
    </script>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous">
    </script>
</body>

</html>